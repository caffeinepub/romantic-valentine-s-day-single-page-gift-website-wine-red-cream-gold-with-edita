{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Draft-to-production publish action (frontend wiring)",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a minimal admin-only UI in the draft site that triggers the existing backend publishDraftToProduction capability so the latest edited draft can be deployed to production without changing page content.",
      "acceptanceCriteria": [
        "A new production deployment is created from the latest draft state (not an older build).",
        "After deployment completes, the production/live site shows the same updated content as the draft when opened in an incognito window or after a hard refresh.",
        "The draft URL remains accessible for further edits: https://unique-ivory-kkt-draft.caffeine.xyz/#caffeineAdminToken=640f49c9763a934d49fea9aed16a4ff2dca78e1f94594fb994a9e27de41b5beb"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useAdminTokenFromHash.ts",
          "operation": "create",
          "description": "Create a small hook that reads and tracks the presence/value of the #caffeineAdminToken from window.location.hash (and updates on hash changes) to enable showing admin-only controls on the draft URL."
        },
        {
          "path": "frontend/src/components/admin/PublishDraftBar.tsx",
          "operation": "create",
          "description": "Create an admin-only banner/control that appears when #caffeineAdminToken is present and lets the user trigger publishing. Use the existing core-infrastructure actor wiring via useActor() to call publishDraftToProduction(), and use existing shadcn-ui Button (and any existing UI primitives already in the repo) for the action + status UI. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wire the new PublishDraftBar into the app so it renders above the Valentine sections only when the admin token is present (no new routes/pages). Ensure the control shows clear success/failure state and reminds the user to hard refresh or check in an incognito window after publish completes."
        }
      ]
    }
  ]
}